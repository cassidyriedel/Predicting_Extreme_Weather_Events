<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Cassidy Riedel">
<meta name="dcterms.date" content="2026-01-28">

<title>Modeling Extreme Weather Risk from Climate and Socioeconomic Features</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="ModelingExtremeWeather_files/libs/clipboard/clipboard.min.js"></script>
<script src="ModelingExtremeWeather_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="ModelingExtremeWeather_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="ModelingExtremeWeather_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="ModelingExtremeWeather_files/libs/quarto-html/popper.min.js"></script>
<script src="ModelingExtremeWeather_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ModelingExtremeWeather_files/libs/quarto-html/anchor.min.js"></script>
<link href="ModelingExtremeWeather_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ModelingExtremeWeather_files/libs/quarto-html/quarto-syntax-highlighting-ea1d7ac60288e0f1efdbc993fd8432ae.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ModelingExtremeWeather_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ModelingExtremeWeather_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ModelingExtremeWeather_files/libs/bootstrap/bootstrap-82a8e0681529fff444bbc39736ff6b3a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#project-overview" id="toc-project-overview" class="nav-link active" data-scroll-target="#project-overview">Project Overview</a>
  <ul class="collapse">
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions">Research Questions</a></li>
  <li><a href="#tools-methods" id="toc-tools-methods" class="nav-link" data-scroll-target="#tools-methods">Tools &amp; Methods</a></li>
  </ul></li>
  <li><a href="#import-libraries" id="toc-import-libraries" class="nav-link" data-scroll-target="#import-libraries">Import Libraries</a></li>
  <li><a href="#load-the-dataset" id="toc-load-the-dataset" class="nav-link" data-scroll-target="#load-the-dataset">Load the Dataset</a></li>
  <li><a href="#clean-dataset" id="toc-clean-dataset" class="nav-link" data-scroll-target="#clean-dataset">Clean Dataset</a></li>
  <li><a href="#explore-the-data" id="toc-explore-the-data" class="nav-link" data-scroll-target="#explore-the-data">Explore the Data</a>
  <ul class="collapse">
  <li><a href="#figure-1.-eda" id="toc-figure-1.-eda" class="nav-link" data-scroll-target="#figure-1.-eda">Figure 1. EDA</a></li>
  <li><a href="#figure-2.-histogram-kde-distribution-of-temperatures" id="toc-figure-2.-histogram-kde-distribution-of-temperatures" class="nav-link" data-scroll-target="#figure-2.-histogram-kde-distribution-of-temperatures">Figure 2. Histogram + KDE (distribution of temperatures)</a></li>
  <li><a href="#figure-3.-scatterplot-europe-co₂-vs-temperature-trendline" id="toc-figure-3.-scatterplot-europe-co₂-vs-temperature-trendline" class="nav-link" data-scroll-target="#figure-3.-scatterplot-europe-co₂-vs-temperature-trendline">Figure 3. Scatterplot (Europe CO₂ vs Temperature) + trendline</a></li>
  <li><a href="#figure-4.-violin-plot-extreme-weather-events-by-highnot-high-label" id="toc-figure-4.-violin-plot-extreme-weather-events-by-highnot-high-label" class="nav-link" data-scroll-target="#figure-4.-violin-plot-extreme-weather-events-by-highnot-high-label">Figure 4. Violin plot (Extreme weather events by High/Not High label)</a>
  <ul class="collapse">
  <li><a href="#create-label" id="toc-create-label" class="nav-link" data-scroll-target="#create-label">Create Label</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#build-features-x-label-y" id="toc-build-features-x-label-y" class="nav-link" data-scroll-target="#build-features-x-label-y">Build Features (X) &amp; Label (y)</a></li>
  <li><a href="#traintest-split" id="toc-traintest-split" class="nav-link" data-scroll-target="#traintest-split">Train/Test Split</a></li>
  <li><a href="#random-forest-model" id="toc-random-forest-model" class="nav-link" data-scroll-target="#random-forest-model">Random Forest Model</a></li>
  <li><a href="#confusion-matrix" id="toc-confusion-matrix" class="nav-link" data-scroll-target="#confusion-matrix">Confusion Matrix</a></li>
  <li><a href="#roc-curve" id="toc-roc-curve" class="nav-link" data-scroll-target="#roc-curve">ROC Curve</a></li>
  <li><a href="#redefine-highextreme" id="toc-redefine-highextreme" class="nav-link" data-scroll-target="#redefine-highextreme">Redefine “HighExtreme”</a></li>
  <li><a href="#improved-random-forest-model" id="toc-improved-random-forest-model" class="nav-link" data-scroll-target="#improved-random-forest-model">Improved Random Forest Model</a></li>
  <li><a href="#improved-confusion-matrix" id="toc-improved-confusion-matrix" class="nav-link" data-scroll-target="#improved-confusion-matrix">Improved Confusion Matrix</a></li>
  <li><a href="#improved-roc-curve" id="toc-improved-roc-curve" class="nav-link" data-scroll-target="#improved-roc-curve">Improved ROC Curve</a></li>
  <li><a href="#feature-importances-top-12" id="toc-feature-importances-top-12" class="nav-link" data-scroll-target="#feature-importances-top-12">Feature Importances (top 12)</a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation">Interpretation</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection">Reflection</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="ModelingExtremeWeather.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Modeling Extreme Weather Risk from Climate and Socioeconomic Features</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Cassidy Riedel </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 28, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="project-overview" class="level1">
<h1>Project Overview</h1>
<p>This project analyzes a multi-country climate dataset (2000–2023) to explore relationships between temperature, emissions, rainfall, sea level rise, renewable energy usage, and extreme weather. Using machine learning, I build a Random Forest classifier to predict whether a country experiences a <strong>high</strong> number of extreme weather events based on environmental and economic indicators in a certain year.</p>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research Questions</h2>
<ul>
<li>How have climate indicators (temperature, CO2, sea level, rainfall) changed over time?</li>
<li>Which factors are most associated with extreme weather events?</li>
<li>Can we classify country-years as “High Extreme Events” vs “Not High”?</li>
<li>How well does a Random Forest model perform (confusion matrix + ROC/AUC)?</li>
</ul>
</section>
<section id="tools-methods" class="level2">
<h2 class="anchored" data-anchor-id="tools-methods">Tools &amp; Methods</h2>
<ul>
<li><strong>Python</strong> (Pandas, NumPy, Matplotlib, Seaborn, Scikit-learn)</li>
<li><strong>JupyterLab</strong></li>
<li>Data cleaning</li>
<li>Random Forest classification</li>
<li>Model evaluation (confusion matrix, ROC curve, AUC)</li>
</ul>
<p><strong>Why does this matter?</strong> Extreme weather events have real impacts on people, infrastructure, and ecosystems. Flooding, heat waves, storms, and drought can disrupt daily life and create major economic and public health costs. Understanding which factors are most associated with higher counts of extreme events (such as temperature, emissions, rainfall patterns, and land/energy use) can help support climate risk awareness and better long-term planning.</p>
<p>From a data science perspective, building a model that predicts “high extreme weather” years demonstrates how environmental indicators can be combined into a measurable, interpretable risk signal.</p>
</section>
</section>
<section id="import-libraries" class="level1">
<h1>Import Libraries</h1>
<div id="640b488e-7ff5-4244-8bb0-7be3b63105f6" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix, ConfusionMatrixDisplay, roc_curve, auc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="load-the-dataset" class="level1">
<h1>Load the Dataset</h1>
<div id="81cda36a-7660-43ca-9fc5-a42b9c6cd466" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">"/Users/cassidyriedel/Downloads/Resume Projects/climate_change_dataset.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">Avg Temperature (°C)</th>
<th data-quarto-table-cell-role="th">CO2 Emissions (Tons/Capita)</th>
<th data-quarto-table-cell-role="th">Sea Level Rise (mm)</th>
<th data-quarto-table-cell-role="th">Rainfall (mm)</th>
<th data-quarto-table-cell-role="th">Population</th>
<th data-quarto-table-cell-role="th">Renewable Energy (%)</th>
<th data-quarto-table-cell-role="th">Extreme Weather Events</th>
<th data-quarto-table-cell-role="th">Forest Area (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>2006</td>
<td>UK</td>
<td>8.9</td>
<td>9.3</td>
<td>3.1</td>
<td>1441</td>
<td>530911230</td>
<td>20.4</td>
<td>14</td>
<td>59.8</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>2019</td>
<td>USA</td>
<td>31.0</td>
<td>4.8</td>
<td>4.2</td>
<td>2407</td>
<td>107364344</td>
<td>49.2</td>
<td>8</td>
<td>31.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>2014</td>
<td>France</td>
<td>33.9</td>
<td>2.8</td>
<td>2.2</td>
<td>1241</td>
<td>441101758</td>
<td>33.3</td>
<td>9</td>
<td>35.5</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>2010</td>
<td>Argentina</td>
<td>5.9</td>
<td>1.8</td>
<td>3.2</td>
<td>1892</td>
<td>1069669579</td>
<td>23.7</td>
<td>7</td>
<td>17.7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>2007</td>
<td>Germany</td>
<td>26.9</td>
<td>5.6</td>
<td>2.4</td>
<td>1743</td>
<td>124079175</td>
<td>12.5</td>
<td>4</td>
<td>17.4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="clean-dataset" class="level1">
<h1>Clean Dataset</h1>
<div id="69c6a430-7bd3-458f-8975-8e65c01a2b13" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.drop_duplicates()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>num_cols <span class="op">=</span> [</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Avg Temperature (°C)"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CO2 Emissions (Tons/Capita)"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sea Level Rise (mm)"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rainfall (mm)"</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Population"</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Renewable Energy (%)"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Extreme Weather Events"</span>,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Forest Area (%)"</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>data.isna().<span class="bu">sum</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>Year                           0
Country                        0
Avg Temperature (°C)           0
CO2 Emissions (Tons/Capita)    0
Sea Level Rise (mm)            0
Rainfall (mm)                  0
Population                     0
Renewable Energy (%)           0
Extreme Weather Events         0
Forest Area (%)                0
dtype: int64</code></pre>
</div>
</div>
<div id="f600b129-1c03-4674-bbc8-ac45045eeb9a" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1000 entries, 0 to 999
Data columns (total 10 columns):
 #   Column                       Non-Null Count  Dtype  
---  ------                       --------------  -----  
 0   Year                         1000 non-null   int64  
 1   Country                      1000 non-null   object 
 2   Avg Temperature (°C)         1000 non-null   float64
 3   CO2 Emissions (Tons/Capita)  1000 non-null   float64
 4   Sea Level Rise (mm)          1000 non-null   float64
 5   Rainfall (mm)                1000 non-null   int64  
 6   Population                   1000 non-null   int64  
 7   Renewable Energy (%)         1000 non-null   float64
 8   Extreme Weather Events       1000 non-null   int64  
 9   Forest Area (%)              1000 non-null   float64
dtypes: float64(5), int64(4), object(1)
memory usage: 78.3+ KB</code></pre>
</div>
</div>
</section>
<section id="explore-the-data" class="level1">
<h1>Explore the Data</h1>
<section id="figure-1.-eda" class="level2">
<h2 class="anchored" data-anchor-id="figure-1.-eda">Figure 1. EDA</h2>
<div id="a7c860bb-9328-4b13-af74-a8009b1b2d48" class="cell" data-execution_count="20">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>data.groupby(<span class="st">"Year"</span>)[<span class="st">"Avg Temperature (°C)"</span>].mean().plot()</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Average Temperature Over Time (mean across countries)"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Year"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Avg Temperature (°C)"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Figure 1.</strong> Mean annual average temperature across all countries in the dataset (2000–2023). Each point represents the average of “Avg Temperature (°C)” for all countries in a given year, showing year-to-year variability and potential warming in later years.</p>
</section>
<section id="figure-2.-histogram-kde-distribution-of-temperatures" class="level2">
<h2 class="anchored" data-anchor-id="figure-2.-histogram-kde-distribution-of-temperatures">Figure 2. Histogram + KDE (distribution of temperatures)</h2>
<div id="6889734f-af96-4d14-b996-768d6cb2d911" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">"Avg Temperature (°C)"</span>], bins<span class="op">=</span><span class="dv">30</span>, kde<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">"teal"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Distribution of Average Temperature (°C)"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Avg Temperature (°C)"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Count"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Figure 2.</strong> Distribution of average temperatures across all country-years, showing the overall range and where most observations fall.</p>
</section>
<section id="figure-3.-scatterplot-europe-co₂-vs-temperature-trendline" class="level2">
<h2 class="anchored" data-anchor-id="figure-3.-scatterplot-europe-co₂-vs-temperature-trendline">Figure 3. Scatterplot (Europe CO₂ vs Temperature) + trendline</h2>
<div id="5f402404-37aa-40bc-89b1-eff40ac7e589" class="cell" data-execution_count="31">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>europe <span class="op">=</span> data[data[<span class="st">"Country"</span>].isin([<span class="st">"UK"</span>, <span class="st">"France"</span>, <span class="st">"Germany"</span>])]</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    europe,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"CO2 Emissions (Tons/Capita)"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"Avg Temperature (°C)"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"Country"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    hover_data<span class="op">=</span>[<span class="st">"Year"</span>, <span class="st">"Sea Level Rise (mm)"</span>, <span class="st">"Rainfall (mm)"</span>, <span class="st">"Renewable Energy (%)"</span>, <span class="st">"Forest Area (%)"</span>],</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    trendline<span class="op">=</span><span class="st">"ols"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Europe Only: CO₂ Emissions vs Average Temperature (with Trendline)"</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>                            <div id="13a1b344-bb85-47e7-8672-caa22667e613" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("13a1b344-bb85-47e7-8672-caa22667e613")) {                    Plotly.newPlot(                        "13a1b344-bb85-47e7-8672-caa22667e613",                        [{"customdata":[[2006.0,3.1,1441.0,20.4,59.8],[2022.0,1.5,1966.0,8.2,43.4],[2011.0,2.3,2663.0,40.8,51.6],[2018.0,3.0,865.0,23.8,19.8],[2018.0,4.1,1246.0,14.5,56.7],[2012.0,2.4,2469.0,29.0,60.6],[2000.0,4.7,1255.0,33.4,41.2],[2011.0,3.5,2369.0,33.0,56.5],[2001.0,1.6,1192.0,34.2,29.2],[2000.0,2.0,754.0,16.0,69.8],[2016.0,1.9,770.0,32.7,63.0],[2019.0,3.1,1269.0,7.0,66.0],[2014.0,1.3,1658.0,23.0,46.2],[2018.0,4.1,1709.0,45.4,40.4],[2005.0,2.1,1380.0,14.0,25.2],[2000.0,4.3,932.0,42.0,57.4],[2019.0,4.4,2402.0,12.8,21.7],[2001.0,1.0,674.0,27.6,46.2],[2000.0,2.6,950.0,29.6,61.3],[2000.0,4.5,2559.0,31.7,23.4],[2019.0,3.6,919.0,39.1,32.3],[2018.0,1.3,633.0,27.8,50.6],[2007.0,3.7,1678.0,43.1,69.9],[2023.0,4.2,534.0,14.3,53.8],[2001.0,3.2,2063.0,10.7,63.6],[2005.0,4.1,1162.0,21.9,11.9],[2000.0,4.1,812.0,26.0,66.1],[2002.0,3.6,796.0,11.4,57.7],[2014.0,2.7,1598.0,28.0,15.5],[2016.0,3.9,1748.0,31.7,18.7],[2003.0,3.4,844.0,12.0,20.8],[2021.0,4.0,2387.0,20.8,65.3],[2014.0,1.9,1533.0,21.8,41.2],[2004.0,3.4,2763.0,47.8,36.2],[2016.0,3.9,2311.0,38.5,56.6],[2017.0,4.8,886.0,23.8,35.0],[2002.0,1.6,2224.0,17.5,53.7],[2022.0,3.3,1045.0,44.7,31.1],[2010.0,4.3,891.0,22.8,49.8],[2011.0,3.3,1256.0,27.7,59.6],[2004.0,2.2,1361.0,37.5,11.6],[2006.0,1.2,1962.0,5.9,34.6],[2006.0,2.8,2206.0,24.4,27.9],[2020.0,4.9,1541.0,47.0,16.1],[2007.0,1.5,1073.0,43.5,16.1],[2021.0,5.0,2022.0,41.0,52.7],[2004.0,1.6,1396.0,8.4,24.5],[2023.0,1.3,2472.0,35.1,52.9],[2000.0,4.1,1539.0,31.4,61.0],[2009.0,2.6,1401.0,30.2,33.2],[2021.0,1.9,2960.0,7.2,69.1],[2005.0,4.2,2579.0,44.1,16.9],[2009.0,2.7,928.0,11.2,58.3],[2012.0,1.5,2543.0,39.0,68.9],[2003.0,2.9,1142.0,20.8,25.0],[2022.0,1.1,1652.0,41.4,16.7],[2006.0,4.4,1859.0,46.8,49.6],[2016.0,1.2,1055.0,24.2,29.7],[2014.0,2.2,1799.0,47.5,39.7],[2021.0,1.1,1706.0,47.2,49.0],[2015.0,2.9,1034.0,40.7,11.2],[2001.0,4.2,1130.0,49.5,66.7],[2019.0,2.7,1537.0,7.5,65.8],[2011.0,4.1,713.0,17.9,20.6],[2000.0,2.2,1273.0,14.9,30.1]],"hovertemplate":"Country=UK\u003cbr\u003eCO2 Emissions (Tons\u002fCapita)=%{x}\u003cbr\u003eAvg Temperature (\u00b0C)=%{y}\u003cbr\u003eYear=%{customdata[0]}\u003cbr\u003eSea Level Rise (mm)=%{customdata[1]}\u003cbr\u003eRainfall (mm)=%{customdata[2]}\u003cbr\u003eRenewable Energy (%)=%{customdata[3]}\u003cbr\u003eForest Area (%)=%{customdata[4]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"UK","marker":{"color":"#636efa","symbol":"circle"},"mode":"markers","name":"UK","orientation":"v","showlegend":true,"x":[9.3,16.6,5.4,17.4,18.3,1.1,13.7,8.1,16.1,13.4,18.2,16.3,17.1,12.0,2.4,15.9,19.6,16.8,9.2,11.1,16.4,15.8,3.1,9.1,15.4,14.2,11.8,14.5,12.9,11.5,12.1,13.7,17.0,8.0,19.6,11.0,17.2,19.2,10.5,0.5,1.6,19.5,11.5,12.1,16.5,20.0,14.3,19.5,2.8,16.9,16.4,13.7,11.3,12.8,6.9,13.6,7.4,10.5,15.9,12.9,15.1,4.7,16.3,8.6,10.0],"xaxis":"x","y":[8.9,27.8,13.8,22.9,24.5,21.6,22.9,18.2,7.4,17.1,28.3,17.2,7.1,22.4,30.7,16.4,8.7,25.6,22.4,30.9,23.0,29.8,13.7,33.5,7.1,10.6,20.5,24.0,25.3,29.6,7.1,27.6,5.0,13.3,22.5,6.3,15.6,7.5,19.3,19.6,16.7,12.8,13.1,7.8,10.4,17.1,16.2,27.1,33.5,18.9,6.1,16.8,11.8,9.2,10.9,22.9,30.7,11.3,29.6,12.3,7.3,24.5,31.2,26.2,21.8],"yaxis":"y","type":"scatter"},{"hovertemplate":"\u003cb\u003eOLS trendline\u003c\u002fb\u003e\u003cbr\u003eAvg Temperature (\u00b0C) = -0.25067 * CO2 Emissions (Tons\u002fCapita) + 21.6619\u003cbr\u003eR\u003csup\u003e2\u003c\u002fsup\u003e=0.023614\u003cbr\u003e\u003cbr\u003eCountry=UK\u003cbr\u003eCO2 Emissions (Tons\u002fCapita)=%{x}\u003cbr\u003eAvg Temperature (\u00b0C)=%{y} \u003cb\u003e(trend)\u003c\u002fb\u003e\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"UK","marker":{"color":"#636efa","symbol":"circle"},"mode":"lines","name":"UK","showlegend":false,"x":[0.5,1.1,1.6,2.4,2.8,3.1,4.7,5.4,6.9,7.4,8.0,8.1,8.6,9.1,9.2,9.3,10.0,10.5,10.5,11.0,11.1,11.3,11.5,11.5,11.8,12.0,12.1,12.1,12.8,12.9,12.9,13.4,13.6,13.7,13.7,13.7,14.2,14.3,14.5,15.1,15.4,15.8,15.9,15.9,16.1,16.3,16.3,16.4,16.4,16.5,16.6,16.8,16.9,17.0,17.1,17.2,17.4,18.2,18.3,19.2,19.5,19.5,19.6,19.6,20.0],"xaxis":"x","y":[21.53660443216111,21.386202339410687,21.26086726211867,21.06033113845144,20.960063076617825,20.884862030242612,20.483789782908154,20.30832067469933,19.932315442823274,19.806980365531256,19.656578272780834,19.63151125732243,19.506176180030412,19.380841102738394,19.35577408727999,19.330707071821585,19.155237963612763,19.029902886320745,19.029902886320745,18.904567809028723,18.879500793570323,18.829366762653514,18.779232731736705,18.779232731736705,18.704031685361496,18.653897654444688,18.628830638986283,18.628830638986283,18.45336153077746,18.428294515319056,18.428294515319056,18.302959438027038,18.25282540711023,18.227758391651825,18.227758391651825,18.227758391651825,18.102423314359807,18.077356298901403,18.027222267984598,17.876820175234176,17.801619128858963,17.70135106702535,17.676284051566945,17.676284051566945,17.626150020650137,17.57601598973333,17.57601598973333,17.550948974274927,17.550948974274927,17.525881958816523,17.50081494335812,17.450680912441314,17.42561389698291,17.400546881524505,17.3754798660661,17.350412850607697,17.30027881969089,17.09974269602366,17.074675680565257,16.849072541439625,16.773871495064412,16.773871495064412,16.74880447960601,16.74880447960601,16.648536417772394],"yaxis":"y","type":"scatter"},{"customdata":[[2014.0,2.2,1241.0,33.3,35.5],[2021.0,2.3,2401.0,37.9,52.4],[2023.0,4.9,545.0,33.7,49.3],[2003.0,4.0,1319.0,33.2,27.9],[2013.0,3.1,2039.0,30.5,21.3],[2007.0,2.4,2327.0,48.5,69.0],[2006.0,2.8,1769.0,20.4,13.3],[2014.0,2.7,2282.0,35.6,53.0],[2022.0,4.4,882.0,7.2,39.6],[2002.0,3.7,2202.0,7.0,57.0],[2018.0,4.6,764.0,5.6,53.4],[2014.0,1.0,2744.0,8.2,26.3],[2021.0,4.8,2423.0,25.5,16.3],[2000.0,1.3,1056.0,29.6,41.8],[2019.0,4.4,2548.0,15.5,54.0],[2006.0,2.7,1664.0,47.8,23.3],[2007.0,2.8,1964.0,27.2,66.6],[2017.0,2.8,2684.0,20.0,32.5],[2019.0,1.8,1537.0,23.9,32.4],[2011.0,2.6,1181.0,33.1,54.4],[2013.0,3.9,1658.0,47.6,40.0],[2007.0,4.1,2438.0,8.3,62.5],[2005.0,2.5,1501.0,21.5,63.4],[2022.0,3.1,2412.0,42.9,38.2],[2017.0,2.9,2181.0,46.4,55.0],[2015.0,4.7,1290.0,48.9,21.2],[2006.0,3.8,2138.0,42.9,26.2],[2013.0,4.7,1287.0,31.6,24.4],[2015.0,2.3,824.0,37.1,14.2],[2000.0,3.4,1990.0,24.4,52.9],[2003.0,4.2,610.0,26.8,60.3],[2015.0,2.3,2214.0,24.9,24.2],[2019.0,3.2,2720.0,41.4,60.5],[2002.0,4.7,2878.0,32.8,44.3],[2003.0,2.8,1207.0,34.3,23.5],[2002.0,2.6,2408.0,25.6,14.5],[2012.0,4.8,871.0,42.4,12.7],[2014.0,4.2,1884.0,23.6,16.3],[2014.0,4.7,2933.0,24.1,20.3],[2009.0,1.6,839.0,39.3,57.1],[2016.0,4.0,1545.0,49.5,64.8],[2012.0,1.1,1347.0,24.6,55.8],[2008.0,2.7,1096.0,39.5,68.9],[2021.0,2.3,2644.0,7.9,28.6],[2012.0,1.9,2122.0,17.1,52.3],[2004.0,1.2,2321.0,10.7,34.1],[2014.0,1.0,645.0,27.1,25.0],[2004.0,3.5,1488.0,7.4,58.3],[2010.0,2.1,1085.0,17.1,65.9],[2008.0,1.4,526.0,44.7,47.6],[2012.0,2.1,1742.0,17.2,11.1],[2000.0,3.7,2413.0,44.7,54.4],[2021.0,2.4,2426.0,43.4,11.9],[2015.0,4.3,2259.0,16.3,38.5],[2023.0,4.9,926.0,36.5,15.5],[2018.0,2.9,1617.0,23.5,27.7],[2018.0,4.1,2620.0,24.9,44.9],[2015.0,4.2,2527.0,5.7,58.3],[2023.0,4.2,907.0,38.3,28.8],[2023.0,3.2,643.0,30.7,25.2],[2001.0,4.4,2989.0,38.5,64.6],[2008.0,2.3,2851.0,20.5,58.9],[2012.0,2.6,979.0,5.1,36.8],[2020.0,4.3,1315.0,50.0,41.3],[2014.0,4.1,2666.0,27.6,20.3],[2021.0,4.1,1133.0,37.8,16.3]],"hovertemplate":"Country=France\u003cbr\u003eCO2 Emissions (Tons\u002fCapita)=%{x}\u003cbr\u003eAvg Temperature (\u00b0C)=%{y}\u003cbr\u003eYear=%{customdata[0]}\u003cbr\u003eSea Level Rise (mm)=%{customdata[1]}\u003cbr\u003eRainfall (mm)=%{customdata[2]}\u003cbr\u003eRenewable Energy (%)=%{customdata[3]}\u003cbr\u003eForest Area (%)=%{customdata[4]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"France","marker":{"color":"#EF553B","symbol":"circle"},"mode":"markers","name":"France","orientation":"v","showlegend":true,"x":[2.8,7.1,10.9,11.0,6.1,5.5,16.7,14.1,8.2,19.0,12.1,16.9,7.7,19.9,16.6,16.0,17.1,7.4,16.2,5.2,9.8,7.1,18.6,17.4,0.6,1.3,13.5,19.0,8.3,4.8,11.6,17.6,12.3,11.9,7.1,19.3,3.2,8.2,5.4,17.9,18.1,10.1,12.9,13.8,17.8,15.6,6.2,5.8,2.9,11.0,2.8,19.1,19.6,4.1,11.2,3.9,5.4,10.2,19.9,4.5,13.3,18.3,4.6,8.5,7.8,5.0],"xaxis":"x","y":[33.9,21.9,9.8,25.8,8.7,21.3,24.7,15.8,12.1,9.4,23.2,26.2,5.5,12.6,12.7,9.8,34.8,28.0,29.4,21.7,12.7,25.4,29.7,20.2,15.3,29.6,14.7,23.2,19.3,28.3,19.5,13.9,28.5,30.4,11.0,30.8,28.4,34.7,14.7,8.4,32.6,6.3,7.9,10.4,27.7,31.4,25.6,10.0,14.0,6.5,5.2,8.9,17.9,30.6,21.4,18.8,24.8,14.4,31.9,15.9,27.0,24.6,5.9,5.1,16.7,11.8],"yaxis":"y","type":"scatter"},{"hovertemplate":"\u003cb\u003eOLS trendline\u003c\u002fb\u003e\u003cbr\u003eAvg Temperature (\u00b0C) = 0.172205 * CO2 Emissions (Tons\u002fCapita) + 17.4948\u003cbr\u003eR\u003csup\u003e2\u003c\u002fsup\u003e=0.012207\u003cbr\u003e\u003cbr\u003eCountry=France\u003cbr\u003eCO2 Emissions (Tons\u002fCapita)=%{x}\u003cbr\u003eAvg Temperature (\u00b0C)=%{y} \u003cb\u003e(trend)\u003c\u002fb\u003e\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"France","marker":{"color":"#EF553B","symbol":"circle"},"mode":"lines","name":"France","showlegend":false,"x":[0.6,1.3,2.8,2.8,2.9,3.2,3.9,4.1,4.5,4.6,4.8,5.0,5.2,5.4,5.4,5.5,5.8,6.1,6.2,7.1,7.1,7.1,7.4,7.7,7.8,8.2,8.2,8.3,8.5,9.8,10.1,10.2,10.9,11.0,11.0,11.2,11.6,11.9,12.1,12.3,12.9,13.3,13.5,13.8,14.1,15.6,16.0,16.2,16.6,16.7,16.9,17.1,17.4,17.6,17.8,17.9,18.1,18.3,18.6,19.0,19.0,19.1,19.3,19.6,19.9,19.9],"xaxis":"x","y":[17.598143138102927,17.718686527491474,17.976993790466935,17.976993790466935,17.9942142746653,18.04587572726039,18.16641911664894,18.20086008504567,18.269742021839125,18.28696250603749,18.321403474434216,18.355844442830943,18.390285411227673,18.4247263796244,18.4247263796244,18.441946863822764,18.493608316417856,18.545269769012947,18.562490253211312,18.71747461099659,18.71747461099659,18.71747461099659,18.76913606359168,18.820797516186772,18.838018000385137,18.906899937178594,18.906899937178594,18.92412042137696,18.958561389773685,19.182427684352415,19.23408913694751,19.25130962114587,19.37185301053442,19.389073494732784,19.389073494732784,19.423514463129514,19.49239639992297,19.544057852518062,19.57849882091479,19.61293978931152,19.7162626945017,19.785144631295157,19.819585599691884,19.87124705228698,19.92290850488207,20.18121576785753,20.250097704650987,20.284538673047713,20.35342060984117,20.370641094039534,20.40508206243626,20.43952303083299,20.491184483428082,20.52562545182481,20.56006642022154,20.5772869044199,20.61172787281663,20.646168841213356,20.69783029380845,20.766712230601904,20.766712230601904,20.78393271480027,20.818373683197,20.87003513579209,20.92169658838718,20.92169658838718],"yaxis":"y","type":"scatter"},{"customdata":[[2007.0,2.4,1743.0,12.5,17.4],[2007.0,1.7,2906.0,42.9,50.7],[2022.0,2.8,1961.0,9.2,25.1],[2002.0,1.8,2905.0,37.3,28.1],[2012.0,2.5,790.0,46.2,21.0],[2004.0,4.0,1441.0,8.8,63.6],[2009.0,1.1,1801.0,49.3,37.5],[2021.0,3.9,1081.0,49.5,51.9],[2022.0,3.3,654.0,44.6,10.5],[2012.0,3.1,1684.0,11.6,62.7],[2018.0,3.5,1246.0,12.2,58.8],[2005.0,4.0,723.0,5.6,53.3],[2007.0,4.3,719.0,30.5,49.5],[2001.0,3.9,1856.0,23.8,50.5],[2022.0,2.5,1338.0,44.4,47.9],[2021.0,3.0,1731.0,37.1,47.3],[2008.0,1.4,2223.0,10.7,66.0],[2009.0,3.7,967.0,30.8,54.1],[2022.0,1.3,1349.0,19.5,63.3],[2015.0,3.8,2354.0,48.4,13.0],[2023.0,1.5,1832.0,6.0,50.9],[2017.0,3.7,2479.0,37.5,16.3],[2013.0,4.6,1198.0,19.4,17.7],[2018.0,2.1,1418.0,8.5,34.9],[2000.0,1.6,2378.0,33.7,69.2],[2023.0,1.5,1401.0,7.5,38.8],[2023.0,3.0,2976.0,40.2,52.5],[2004.0,4.7,1015.0,49.4,66.2],[2007.0,3.8,1592.0,34.0,61.5],[2015.0,2.3,572.0,42.6,66.0],[2007.0,2.9,2855.0,14.7,22.2],[2018.0,3.2,1234.0,46.8,24.9],[2016.0,4.0,2157.0,21.4,38.9],[2015.0,2.2,1715.0,39.3,49.2],[2004.0,3.6,1393.0,48.5,43.4],[2003.0,3.0,2871.0,19.4,33.5],[2002.0,1.8,1413.0,17.1,64.8],[2017.0,2.8,1326.0,29.2,69.1],[2009.0,2.4,1850.0,13.5,29.7],[2001.0,4.0,2144.0,25.7,46.7],[2016.0,4.1,2373.0,32.0,56.1],[2009.0,1.3,1388.0,19.8,48.9],[2006.0,4.6,1605.0,19.2,22.6],[2009.0,1.3,629.0,47.6,25.7],[2014.0,2.9,688.0,48.6,50.4],[2001.0,4.4,1504.0,24.9,36.9],[2009.0,1.7,2592.0,22.4,67.3],[2001.0,3.9,1305.0,8.9,45.7],[2001.0,3.2,2378.0,26.2,50.7],[2018.0,1.5,2342.0,10.8,34.2],[2010.0,1.4,1841.0,40.7,21.9],[2022.0,1.8,2238.0,45.3,23.4],[2004.0,3.6,2794.0,41.3,66.8],[2007.0,3.7,1066.0,8.3,20.1],[2019.0,4.3,2101.0,41.3,29.2],[2007.0,1.4,737.0,43.8,46.5],[2001.0,5.0,2257.0,18.7,50.3],[2005.0,2.9,2297.0,25.2,36.2],[2000.0,1.3,2904.0,30.8,15.6],[2005.0,2.0,1046.0,25.4,61.6],[2011.0,2.1,2854.0,41.0,19.8]],"hovertemplate":"Country=Germany\u003cbr\u003eCO2 Emissions (Tons\u002fCapita)=%{x}\u003cbr\u003eAvg Temperature (\u00b0C)=%{y}\u003cbr\u003eYear=%{customdata[0]}\u003cbr\u003eSea Level Rise (mm)=%{customdata[1]}\u003cbr\u003eRainfall (mm)=%{customdata[2]}\u003cbr\u003eRenewable Energy (%)=%{customdata[3]}\u003cbr\u003eForest Area (%)=%{customdata[4]}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Germany","marker":{"color":"#00cc96","symbol":"circle"},"mode":"markers","name":"Germany","orientation":"v","showlegend":true,"x":[5.6,17.6,19.1,19.7,10.9,17.3,0.5,13.1,14.9,9.3,2.1,10.6,7.9,2.2,19.6,10.4,3.7,1.2,6.4,12.3,12.0,19.4,4.8,14.6,11.2,16.5,4.2,18.9,9.8,1.5,13.8,18.3,6.9,1.3,3.1,7.7,18.0,17.0,18.2,3.7,4.8,15.8,7.9,9.9,17.7,4.7,2.4,16.3,6.7,5.3,11.2,1.8,12.7,2.1,4.5,3.3,9.7,6.0,0.7,16.6,17.3],"xaxis":"x","y":[26.9,11.0,12.4,8.1,23.4,18.0,6.3,23.9,22.9,19.0,30.1,22.6,33.5,15.3,27.0,16.2,28.1,18.1,21.5,22.6,32.4,29.7,17.9,7.6,5.1,13.2,18.3,28.1,9.8,25.2,21.0,22.3,29.9,8.7,8.7,30.5,23.5,9.0,10.7,23.6,18.3,34.3,25.0,23.0,21.7,34.7,19.4,19.2,6.3,27.0,24.9,13.7,13.5,20.6,8.3,17.6,30.3,27.2,14.4,32.0,24.1],"yaxis":"y","type":"scatter"},{"hovertemplate":"\u003cb\u003eOLS trendline\u003c\u002fb\u003e\u003cbr\u003eAvg Temperature (\u00b0C) = 0.0624865 * CO2 Emissions (Tons\u002fCapita) + 19.6711\u003cbr\u003eR\u003csup\u003e2\u003c\u002fsup\u003e=0.002309\u003cbr\u003e\u003cbr\u003eCountry=Germany\u003cbr\u003eCO2 Emissions (Tons\u002fCapita)=%{x}\u003cbr\u003eAvg Temperature (\u00b0C)=%{y} \u003cb\u003e(trend)\u003c\u002fb\u003e\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"Germany","marker":{"color":"#00cc96","symbol":"circle"},"mode":"lines","name":"Germany","showlegend":false,"x":[0.5,0.7,1.2,1.3,1.5,1.8,2.1,2.1,2.2,2.4,3.1,3.3,3.7,3.7,4.2,4.5,4.7,4.8,4.8,5.3,5.6,6.0,6.4,6.7,6.9,7.7,7.9,7.9,9.3,9.7,9.8,9.9,10.4,10.6,10.9,11.2,11.2,12.0,12.3,12.7,13.1,13.8,14.6,14.9,15.8,16.3,16.5,16.6,17.0,17.3,17.3,17.6,17.7,18.0,18.2,18.3,18.9,19.1,19.4,19.6,19.7],"xaxis":"x","y":[19.70238104187751,19.71487833528732,19.746121568811848,19.752370215516756,19.764867508926567,19.783613449041287,19.802359389156003,19.802359389156003,19.80860803586091,19.821105329270722,19.864845856205065,19.877343149614877,19.9023377364345,19.9023377364345,19.93358096995903,19.952326910073747,19.96482420348356,19.971072850188467,19.971072850188467,20.002316083712994,20.021062023827714,20.046056610647337,20.07105119746696,20.08979713758168,20.102294430991492,20.15228360463074,20.16478089804055,20.16478089804055,20.252261951909237,20.27725653872886,20.283505185433768,20.289753832138672,20.320997065663203,20.333494359073015,20.35224029918773,20.37098623930245,20.37098623930245,20.420975412941697,20.439721353056417,20.46471593987604,20.489710526695664,20.533451053630007,20.583440227269254,20.602186167383973,20.658423987728128,20.689667221252655,20.702164514662467,20.708413161367375,20.733407748187,20.752153688301718,20.752153688301718,20.770899628416434,20.77714827512134,20.79589421523606,20.808391508645872,20.814640155350776,20.852132035580212,20.864629328990024,20.883375269104743,20.895872562514555,20.902121209219462],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"CO2 Emissions (Tons\u002fCapita)"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Avg Temperature (\u00b0C)"}},"legend":{"title":{"text":"Country"},"tracegroupgap":0},"title":{"text":"Europe Only: CO\u2082 Emissions vs Average Temperature (with Trendline)"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('13a1b344-bb85-47e7-8672-caa22667e613');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<p><strong>Figure 3.</strong> Interactive scatterplot for European countries (UK, France, Germany) showing the relationship between CO₂ emissions per capita and average temperature across country-years (2000–2023). Points are colored by country, hover reveals year and other indicators, and the fitted OLS trendline summarizes the overall direction of the relationship within this subset.</p>
</section>
<section id="figure-4.-violin-plot-extreme-weather-events-by-highnot-high-label" class="level2">
<h2 class="anchored" data-anchor-id="figure-4.-violin-plot-extreme-weather-events-by-highnot-high-label">Figure 4. Violin plot (Extreme weather events by High/Not High label)</h2>
<section id="create-label" class="level3">
<h3 class="anchored" data-anchor-id="create-label">Create Label</h3>
<div id="13e26c9f-03f3-4781-9424-41c6721524c9" class="cell" data-execution_count="34">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>threshold <span class="op">=</span> data[<span class="st">"Extreme Weather Events"</span>].median()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">"HighExtreme"</span>] <span class="op">=</span> (data[<span class="st">"Extreme Weather Events"</span>] <span class="op">&gt;</span> threshold).astype(<span class="bu">int</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div id="929fef5f-5a6c-4a13-a9ae-94220d31d35b" class="cell" data-execution_count="35">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>sns.violinplot(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>data,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"HighExtreme"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"Extreme Weather Events"</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Extreme Weather Events by Class Label"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"HighExtreme (0 = Not High, 1 = High)"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Extreme Weather Events"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Figure 4.</strong> Violin plot comparing the distribution of extreme weather events for the “Not High” vs “High” classes used in the Random Forest model.</p>
</section>
</section>
</section>
<section id="build-features-x-label-y" class="level1">
<h1>Build Features (X) &amp; Label (y)</h1>
<div id="9267d6de-cc67-4970-b5de-298adb01d95a" class="cell" data-execution_count="36">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> [</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Avg Temperature (°C)"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CO2 Emissions (Tons/Capita)"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sea Level Rise (mm)"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rainfall (mm)"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Population"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Renewable Energy (%)"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Forest Area (%)"</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(data[features <span class="op">+</span> [<span class="st">"Country"</span>]], columns<span class="op">=</span>[<span class="st">"Country"</span>], drop_first<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> data[<span class="st">"HighExtreme"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="traintest-split" class="level1">
<h1>Train/Test Split</h1>
<div id="b76dd245-e9d4-43c7-9621-b7f5f0bfc7d3" class="cell" data-execution_count="38">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_clean <span class="op">=</span> data.copy()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(df_clean[features <span class="op">+</span> [<span class="st">"Country"</span>]], columns<span class="op">=</span>[<span class="st">"Country"</span>], drop_first<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df_clean[<span class="st">"HighExtreme"</span>]</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Train/test split</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    X, y, test_size<span class="op">=</span><span class="fl">0.25</span>, random_state<span class="op">=</span><span class="dv">42</span>, stratify<span class="op">=</span>y</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="random-forest-model" class="level1">
<h1>Random Forest Model</h1>
<div id="50a2865b-86b9-4cf8-830a-ef7d7559d2a3" class="cell" data-execution_count="54">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>rf <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">400</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>rf.fit(X_train, y_train)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="54">
<style>#sk-container-id-2 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: #000;
  --sklearn-color-text-muted: #666;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-2 {
  color: var(--sklearn-color-text);
}

#sk-container-id-2 pre {
  padding: 0;
}

#sk-container-id-2 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-2 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-2 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-2 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-2 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-2 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-2 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-2 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-2 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-2 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-2 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-2 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-2 label.sk-toggleable__label {
  cursor: pointer;
  display: flex;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
  align-items: start;
  justify-content: space-between;
  gap: 0.5em;
}

#sk-container-id-2 label.sk-toggleable__label .caption {
  font-size: 0.6rem;
  font-weight: lighter;
  color: var(--sklearn-color-text-muted);
}

#sk-container-id-2 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-2 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-2 div.sk-toggleable__content {
  display: none;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-2 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-2 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-2 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-2 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  display: block;
  width: 100%;
  overflow: visible;
}

#sk-container-id-2 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-2 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-2 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-2 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-2 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-2 div.sk-label label.sk-toggleable__label,
#sk-container-id-2 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-2 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-2 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-2 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-2 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-2 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-2 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-2 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-2 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 0.5em;
  text-align: center;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-2 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-2 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-2 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-2 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}

.estimator-table summary {
    padding: .5rem;
    font-family: monospace;
    cursor: pointer;
}

.estimator-table details[open] {
    padding-left: 0.1rem;
    padding-right: 0.1rem;
    padding-bottom: 0.3rem;
}

.estimator-table .parameters-table {
    margin-left: auto !important;
    margin-right: auto !important;
}

.estimator-table .parameters-table tr:nth-child(odd) {
    background-color: #fff;
}

.estimator-table .parameters-table tr:nth-child(even) {
    background-color: #f6f6f6;
}

.estimator-table .parameters-table tr:hover {
    background-color: #e0e0e0;
}

.estimator-table table td {
    border: 1px solid rgba(106, 105, 104, 0.232);
}

.user-set td {
    color:rgb(255, 94, 0);
    text-align: left;
}

.user-set td.value pre {
    color:rgb(255, 94, 0) !important;
    background-color: transparent !important;
}

.default td {
    color: black;
    text-align: left;
}

.user-set td i,
.default td i {
    color: black;
}

.copy-paste-icon {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNy4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjUgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTIwOCAwTDMzMi4xIDBjMTIuNyAwIDI0LjkgNS4xIDMzLjkgMTQuMWw2Ny45IDY3LjljOSA5IDE0LjEgMjEuMiAxNC4xIDMzLjlMNDQ4IDMzNmMwIDI2LjUtMjEuNSA0OC00OCA0OGwtMTkyIDBjLTI2LjUgMC00OC0yMS41LTQ4LTQ4bDAtMjg4YzAtMjYuNSAyMS41LTQ4IDQ4LTQ4ek00OCAxMjhsODAgMCAwIDY0LTY0IDAgMCAyNTYgMTkyIDAgMC0zMiA2NCAwIDAgNDhjMCAyNi41LTIxLjUgNDgtNDggNDhMNDggNTEyYy0yNi41IDAtNDgtMjEuNS00OC00OEwwIDE3NmMwLTI2LjUgMjEuNS00OCA0OC00OHoiLz48L3N2Zz4=);
    background-repeat: no-repeat;
    background-size: 14px 14px;
    background-position: 0;
    display: inline-block;
    width: 14px;
    height: 14px;
    cursor: pointer;
}
</style><div id="sk-container-id-2" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>RandomForestClassifier(n_estimators=400, random_state=42)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-2" type="checkbox" checked=""><label for="sk-estimator-id-2" class="sk-toggleable__label fitted sk-toggleable__label-arrow"><div><div>RandomForestClassifier</div></div><div><a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.7/modules/generated/sklearn.ensemble.RandomForestClassifier.html">?<span>Documentation for RandomForestClassifier</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></div></label><div class="sk-toggleable__content fitted" data-param-prefix="">
        <div class="estimator-table">
            <details>
                <summary>Parameters</summary>
                
<table class="parameters-table caption-top table table-sm table-striped small">
<tbody>
<tr class="user-set odd">
<td><em></em></td>
<td class="param">n_estimators&nbsp;</td>
<td class="value">400</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">criterion&nbsp;</td>
<td class="value">'gini'</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">max_depth&nbsp;</td>
<td class="value">None</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">min_samples_split&nbsp;</td>
<td class="value">2</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">min_samples_leaf&nbsp;</td>
<td class="value">1</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">min_weight_fraction_leaf&nbsp;</td>
<td class="value">0.0</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">max_features&nbsp;</td>
<td class="value">'sqrt'</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">max_leaf_nodes&nbsp;</td>
<td class="value">None</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">min_impurity_decrease&nbsp;</td>
<td class="value">0.0</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">bootstrap&nbsp;</td>
<td class="value">True</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">oob_score&nbsp;</td>
<td class="value">False</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">n_jobs&nbsp;</td>
<td class="value">None</td>
</tr>
<tr class="user-set odd">
<td><em></em></td>
<td class="param">random_state&nbsp;</td>
<td class="value">42</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">verbose&nbsp;</td>
<td class="value">0</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">warm_start&nbsp;</td>
<td class="value">False</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">class_weight&nbsp;</td>
<td class="value">None</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">ccp_alpha&nbsp;</td>
<td class="value">0.0</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">max_samples&nbsp;</td>
<td class="value">None</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">monotonic_cst&nbsp;</td>
<td class="value">None</td>
</tr>
</tbody>
</table>

            </details>
        </div>
    </div></div></div></div></div><script>function copyToClipboard(text, element) {
    // Get the parameter prefix from the closest toggleable content
    const toggleableContent = element.closest('.sk-toggleable__content');
    const paramPrefix = toggleableContent ? toggleableContent.dataset.paramPrefix : '';
    const fullParamName = paramPrefix ? `${paramPrefix}${text}` : text;

    const originalStyle = element.style;
    const computedStyle = window.getComputedStyle(element);
    const originalWidth = computedStyle.width;
    const originalHTML = element.innerHTML.replace('Copied!', '');

    navigator.clipboard.writeText(fullParamName)
        .then(() => {
            element.style.width = originalWidth;
            element.style.color = 'green';
            element.innerHTML = "Copied!";

            setTimeout(() => {
                element.innerHTML = originalHTML;
                element.style = originalStyle;
            }, 2000);
        })
        .catch(err => {
            console.error('Failed to copy:', err);
            element.style.color = 'red';
            element.innerHTML = "Failed!";
            setTimeout(() => {
                element.innerHTML = originalHTML;
                element.style = originalStyle;
            }, 2000);
        });
    return false;
}

document.querySelectorAll('.fa-regular.fa-copy').forEach(function(element) {
    const toggleableContent = element.closest('.sk-toggleable__content');
    const paramPrefix = toggleableContent ? toggleableContent.dataset.paramPrefix : '';
    const paramName = element.parentElement.nextElementSibling.textContent.trim();
    const fullParamName = paramPrefix ? `${paramPrefix}${paramName}` : paramName;

    element.setAttribute('title', fullParamName);
});
</script>
</div>
</div>
</section>
<section id="confusion-matrix" class="level1">
<h1>Confusion Matrix</h1>
<div id="e8d8bfed-2478-4220-b220-aa8694c45e11" class="cell" data-execution_count="40">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> rf.predict(X_test)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(y_test, y_pred)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>ConfusionMatrixDisplay(cm).plot()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Random Forest — High Extreme Events (Confusion Matrix)"</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="roc-curve" class="level1">
<h1>ROC Curve</h1>
<div id="28e8024a-bbc4-4f3a-8dd1-071c24038447" class="cell" data-execution_count="42">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>y_proba <span class="op">=</span> rf.predict_proba(X_test)[:, <span class="dv">1</span>]</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>fpr, tpr, _ <span class="op">=</span> roc_curve(y_test, y_proba)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>roc_auc <span class="op">=</span> auc(fpr, tpr)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>plt.plot(fpr, tpr, label<span class="op">=</span><span class="ss">f"AUC = </span><span class="sc">{</span>roc_auc<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">0</span>,<span class="dv">1</span>], [<span class="dv">0</span>,<span class="dv">1</span>], linestyle<span class="op">=</span><span class="st">"--"</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"ROC Curve — High Extreme Events (Random Forest)"</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"False Positive Rate"</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"True Positive Rate"</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Baseline Random Forest achieved AUC ≈ 0.48, indicating limited predictive signal with the initial label definition and split strategy. Next, I improved the experimental setup by using time-based splits and alternative label definitions (top quartile / within-country) to better reflect meaningful ‘extreme’ conditions.</p>
</section>
<section id="redefine-highextreme" class="level1">
<h1>Redefine “HighExtreme”</h1>
<div id="8ec32e4a-4b8e-4197-9e12-614f427a2620" class="cell" data-execution_count="48">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df_clean <span class="op">=</span> data.sort_values([<span class="st">"Country"</span>, <span class="st">"Year"</span>]).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Country-relative label: 1 if this year is above that country's median</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>df_clean[<span class="st">"HighExtreme"</span>] <span class="op">=</span> (</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    df_clean[<span class="st">"Extreme Weather Events"</span>] <span class="op">&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    df_clean.groupby(<span class="st">"Country"</span>)[<span class="st">"Extreme Weather Events"</span>].transform(<span class="st">"median"</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>).astype(<span class="bu">int</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>df_clean[<span class="st">"HighExtreme"</span>].value_counts()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>HighExtreme
0    566
1    434
Name: count, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="improved-random-forest-model" class="level1">
<h1>Improved Random Forest Model</h1>
<div id="6518056a-d3a1-4be4-9413-347fe7c51e44" class="cell" data-execution_count="50">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> [</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Year"</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Avg Temperature (°C)"</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"CO2 Emissions (Tons/Capita)"</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sea Level Rise (mm)"</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rainfall (mm)"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Population"</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Renewable Energy (%)"</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Forest Area (%)"</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.get_dummies(df_clean[features <span class="op">+</span> [<span class="st">"Country"</span>]], columns<span class="op">=</span>[<span class="st">"Country"</span>], drop_first<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df_clean[<span class="st">"HighExtreme"</span>]</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># time-based split (overall)</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>df_time <span class="op">=</span> df_clean.sort_values(<span class="st">"Year"</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> X.loc[df_time.index]</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> y.loc[df_time.index]</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>split <span class="op">=</span> <span class="bu">int</span>(<span class="bu">len</span>(df_time) <span class="op">*</span> <span class="fl">0.8</span>)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>X_train, X_test <span class="op">=</span> X.iloc[:split], X.iloc[split:]</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>y_train, y_test <span class="op">=</span> y.iloc[:split], y.iloc[split:]</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>rf <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">400</span>, random_state<span class="op">=</span><span class="dv">42</span>, n_jobs<span class="op">=-</span><span class="dv">1</span>, class_weight<span class="op">=</span><span class="st">"balanced"</span>)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>rf.fit(X_train, y_train)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> rf.predict(X_test)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>y_proba <span class="op">=</span> rf.predict_proba(X_test)[:, <span class="dv">1</span>]</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>roc_auc <span class="op">=</span> auc(<span class="op">*</span>roc_curve(y_test, y_proba)[:<span class="dv">2</span>])</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>roc_auc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>0.5160613810741688</code></pre>
</div>
</div>
</section>
<section id="improved-confusion-matrix" class="level1">
<h1>Improved Confusion Matrix</h1>
<div id="813a7ca5-6c29-4ae0-982b-4565816c11e9" class="cell" data-execution_count="52">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(y_test, y_pred)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>ConfusionMatrixDisplay(cm).plot()</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Random Forest — HighExtreme (Confusion Matrix)"</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Confusion matrix for the Random Forest classifier predicting HighExtreme (years with above-median extreme weather events relative to each country’s baseline). The matrix summarizes correct vs.&nbsp;incorrect classifications on the test set, showing true negatives/positives and where the model most often misclassifies high-extreme years.</p>
</section>
<section id="improved-roc-curve" class="level1">
<h1>Improved ROC Curve</h1>
<div id="bde75333-0716-410b-a4bb-25ccc4347b6b" class="cell" data-execution_count="57">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fpr, tpr, _ <span class="op">=</span> roc_curve(y_test, y_proba)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>roc_auc <span class="op">=</span> auc(fpr, tpr)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>plt.plot(fpr, tpr, label<span class="op">=</span><span class="ss">f"AUC = </span><span class="sc">{</span>roc_auc<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">0</span>,<span class="dv">1</span>], [<span class="dv">0</span>,<span class="dv">1</span>], linestyle<span class="op">=</span><span class="st">"--"</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"ROC Curve — HighExtreme (Random Forest)"</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"False Positive Rate"</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"True Positive Rate"</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>ROC curve for the Random Forest model predicting HighExtreme after redefining the label relative to each country’s median extreme-weather baseline. The model achieves an AUC of 0.516, indicating slight improvement over random guessing and limited but measurable predictive signal in the available features.</p>
</section>
<section id="feature-importances-top-12" class="level1">
<h1>Feature Importances (top 12)</h1>
<div id="cec97cac-f241-4a25-98a2-d423a0b08abf" class="cell" data-execution_count="59">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>importances <span class="op">=</span> pd.Series(rf.feature_importances_, index<span class="op">=</span>X_train.columns).sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>sns.barplot(</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>importances.head(<span class="dv">12</span>).values,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>importances.head(<span class="dv">12</span>).index,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span>importances.head(<span class="dv">12</span>).index,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    palette<span class="op">=</span><span class="st">"viridis"</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">False</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Feature Importance for HighExtreme Prediction"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Importance"</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Feature"</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>plt.xlim(left<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">"x"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="ModelingExtremeWeather_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Random Forest feature importance rankings for predicting HighExtreme (above-country-median extreme weather years). Rainfall, renewable energy share, and average temperature contribute the most predictive signal, followed by forest area, population, and CO₂ emissions; several country dummy variables have smaller but nonzero influence.</p>
</section>
<section id="interpretation" class="level1">
<h1>Interpretation</h1>
<p>The feature importance plot suggests that <strong>rainfall, renewable energy share, and average temperature</strong> contribute the most to the model’s predictions, with additional signal from forest area, population, and CO₂ emissions. Because Random Forest feature importance reflects how often a feature helps split the data, it should be interpreted as <strong>relative influence</strong> rather than proof of causation.</p>
</section>
<section id="limitations" class="level1">
<h1>Limitations</h1>
<ul>
<li><strong>AUC is modest (~0.52)</strong>, meaning the features provide limited predictive signal for above-baseline extreme event years.</li>
<li>The dataset is <strong>aggregated at the country-year level</strong>, which can hide regional variability (storms and floods are local).</li>
<li>“Extreme Weather Events” is treated as a single count, but different event types may have different drivers.</li>
<li>This analysis is <strong>correlational</strong> and does not imply causation.</li>
</ul>
</section>
<section id="reflection" class="level1">
<h1>Reflection</h1>
<p>This project showed me that building a model is not just about picking an algorithm—it’s about how the problem is defined. My first attempt at predicting “HighExtreme” using a global threshold produced near-random results, which forced me to step back and rethink the label. Redefining “HighExtreme” relative to each country’s baseline created a more meaningful target and improved performance (AUC increased to ~0.52).</p>
<p>I also learned how important evaluation choices are. Using ROC/AUC and confusion matrices helped me see where the model struggled (especially correctly identifying HighExtreme cases), and feature importance gave me a way to explain what the model relied on. Even though the model’s performance was modest, the process was valuable because it highlighted dataset limitations and the need for higher-resolution climate and hazard data to make stronger predictions.</p>
<p>Overall, this project strengthened my ability to clean data, design a defensible target variable, build and evaluate a machine learning model, and communicate results honestly—skills I want to bring to an internship in environmental data science.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>